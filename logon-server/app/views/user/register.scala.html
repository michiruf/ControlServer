@import config.twirl.TestFieldConstructor
@(form: play.data.Form[User])
@registerContent = {
    <a name="register" id="register"></a>
    <section class="container my-5">
        <h2>
            <span class="fas fa-user-plus"></span>
            Create an account
        </h2>
        <p>
            You need to create an account to find your devices when you can not or do not want to use direct connection.
        </p>
        @if(form.hasErrors) {
            @* TODO Test this *@
            <ul class="error">
            @for(error <- form.allErrors) {
                <li>@error.format(messages())</li>
            }
            </ul>
        }
        @helper.form(action = routes.UserController.doRegister) {
            @helper.CSRF.formField

            <div class="form-group">
                @helper.inputText(form("username"),
                    '_label -> "Username",
                    'class -> "form-control",
                    'placeholder -> "Enter your username",
                    '$help -> "HELP TEST",
                    '$help_class -> "form-text text-muted",
                    '$invalid -> "Bad"
                )(new TestFieldConstructor, implicitJavaMessages)

                    <!--
                <label for="username">Username</label>
                <input type="text" name="username" id="username" class="form-control" placeholder="Enter your username" value="@form("username").getValue.orElse("")">
                <small class="invalid-feedback">
                    Bad
                </small>
                -->
            </div>

            <div class="form-group">
                <label for="email">Email address</label>
                <input type="email" name="email" id="email" class="form-control" aria-describedby="emailHelp" placeholder="Enter your email" value="@form("email").getValue.orElse("")">
                <small id="emailHelp" class="form-text text-muted">
                    Optional. By entering your email address you are able to recover your account when you forgot
                    your password.
                </small>
            </div>

            <div class="form-group">
                <label for="inputPassword">Password</label>
                <div class="form-row">
                    <div class="col-md mb-2 mb-md-0">
                        <input type="password" name="password" id="inputPassword" class="form-control" placeholder="Enter your password" value="@form("password").getValue.orElse("")">
                    </div>
                    <div class="col-md">
                        <input type="password" name="passwordRepeat" id="repeatPassword" class="form-control" placeholder="Repeat your password" value="@form("passwordRepeat").getValue.orElse("")">
                    </div>
                </div>
            </div>

            <div class="form-check mb-3">
                @*mayChecked = @{
                if(form.field("passwordRepeat").getValue.orElse("").contains("true")) {
                checked
                } else {
                unchecked
                }
                }*@
                <input class="form-check-input" type="checkbox" name="tos" id="tos" value="1">
                <label class="form-check-label" for="tos">
                    I have read and accept the
                    <a href="@routes.PagesController.show("terms")" target="_blank">Terms of Use</a>.
                </label>
            </div>

            <button type="submit" class="btn btn-lg btn-primary d-block ml-auto">Create account</button>
        }
    </section>
}

@layouts.main("Register") {
    @registerContent
}
