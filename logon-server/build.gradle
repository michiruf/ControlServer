apply plugin: 'java'

version = '1.0.' + version

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

sourceSets.main {
    java.srcDir 'app'
    resources.srcDirs = ['app/views', 'conf', 'public']
}
sourceSets.test {
    java.srcDir 'test'
}

dependencies {
    compile files('playframework/play-1.3.0.jar')
    compile fileTree(dir: 'playframework/play-dep', include: '*.jar')
    testCompile fileTree(dir: 'playframework/play-test-dep', include: '*.jar')

    compile project(':common')
}

task runJar(type: Jar) {
    manifest {
        attributes 'Main-Class': 'play.server.Server'
        //jvmArgs = ['-Dapplication.path="."'] // TODO?
    }
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}
